<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Aspera的安装与使用 | Jeason's Blog</title>
<meta name=keywords content="sotware"><meta name=description content="Aspera是一款高速下载工具，这里介绍它的安装和基本用法"><meta name=author content="作者:Jeason"><link rel=canonical href=https://jeason.netlify.app/en/posts/tech/aspera/><link crossorigin=anonymous href=/assets/css/stylesheet.e029fa55ed0a02bb684da89d2a53a4e1ba9e26e3719fa48460be52776460b523.css integrity="sha256-4Cn6Ve0KArtoTaidKlOk4bqeJuNxn6SEYL5Sd2RgtSM=" rel="preload stylesheet" as=style><link rel=icon href=https://jeason.netlify.app/img/avatar.jpeg><link rel=icon type=image/png sizes=16x16 href=https://jeason.netlify.app/img/avatar.jpeg><link rel=icon type=image/png sizes=32x32 href=https://jeason.netlify.app/img/avatar.jpeg><link rel=apple-touch-icon href=https://jeason.netlify.app/img/avatar.jpeg><link rel=mask-icon href=https://jeason.netlify.app/img/avatar.jpeg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://jeason.netlify.app/en/posts/tech/aspera/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="Aspera的安装与使用"><meta property="og:description" content="Aspera是一款高速下载工具，这里介绍它的安装和基本用法"><meta property="og:type" content="article"><meta property="og:url" content="https://jeason.netlify.app/en/posts/tech/aspera/"><meta property="og:image" content="https://source.unsplash.com/random/400x200?code"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-10-09T20:13:35+08:00"><meta property="article:modified_time" content="2024-02-23T20:13:35+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://source.unsplash.com/random/400x200?code"><meta name=twitter:title content="Aspera的安装与使用"><meta name=twitter:description content="Aspera是一款高速下载工具，这里介绍它的安装和基本用法"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚 文章","item":"https://jeason.netlify.app/en/posts/"},{"@type":"ListItem","position":2,"name":"👨🏻‍💻 技术","item":"https://jeason.netlify.app/en/posts/tech/"},{"@type":"ListItem","position":3,"name":"Aspera的安装与使用","item":"https://jeason.netlify.app/en/posts/tech/aspera/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Aspera的安装与使用","name":"Aspera的安装与使用","description":"Aspera是一款高速下载工具，这里介绍它的安装和基本用法","keywords":["sotware"],"articleBody":"安装 根据电脑版本下载对应aspera connect server，下载地址：https://www.ibm.com/products/aspera/downloads\ncd ./download wget http://download.asperasoft.com/download/sw/connect/3.7.4/aspera-connect-3.7.4.147727-linux-64.tar.gz 下载获得的是shell脚本，解压安装\ntar zxf aspera-connect-3.7.4.147727-linux-64.tar.gz bash aspera-connect-3.7.4.147727-linux-64.sh 安装后找到home目录下的会有一个.aspera目录，里边包含密钥等信息，可以将其添加入环境变量中\n在.aspera的目录，有两个文件比较重要: 一个是ascp的可执行文件~/.aspera/connect/bin/ascp，另一个ascp的密钥文件~/.aspera/connect/etc/asperaweb_id_dsa.putty,可以把密钥备份到home目录当中\ncd ~ echo 'PATH=$PATH:/home/jeason/.aspera/connect/bin/' \u003e\u003e ~/.bashrc cp ~/.aspera/connect/etc/asperaweb_id_dsa.putty ~/ source .bashrc 重新source配置文件生效\n使用ascp --help参看命令参数\n常见参数：\n-v verbose mode 唠叨模式，能让你实时知道程序在干啥，方便查错。 -T 取消加密，否则有时候数据下载不了 。 -i 提供私钥文件的地址，我也不知道干嘛的，反正不能少，地址一般是~/.aspera/connect/etc中的asperaweb_id_dsa.openssh文件 -l 设置最大传输速度，一般200m到500m，如果不设置，反而速度会比较低，可能有个较低的默认值 -k 断点续传，一般设置为值1 下载sra数据 ascp -T -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh -k 1 -l 200m anonftp@ftp-private.ncbi.nlm.nih.gov:/sra/sra-instant/reads/ByRun/sra/SRR/SRR620/SRR6208854/SRR6208854.sra ./ SRA数据库下载：首先记住，数据的存放地址是ftp-private.ncbi.nlm.nih.gov，SRA在Aspera的用户名是anonftp\nAspera批量下载SRA文件 很多时候需要同时下载多个SRA文件，ascp命令提供参数--file-list，用于批量下载SRA文件。\n可以将下载列表写入sra.txt文件中，然后进行批量下载\n/sra/sra-instant/reads/ByRun/sra/SRR/SRR623/SRR6232298/SRR6232298.sra /sra/sra-instant/reads/ByRun/sra/SRR/SRR623/SRR6232299/SRR6232299.sra ascp -T -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh -k 1 -l 200m --mode recv --host ftp-private.ncbi.nlm.nih.gov --user anonftp --file-list ~/sra.txt ./ asprea同样可以下载ENA的数据，ENA在Aspera的用户名是era-fasp，数据的存放地址是fasp.sra.ebi.ac.uk\n报错 有时会遇到以下报错：\nascp: Failed to open TCP connection for SSH, exiting. Session Stop (Error: Failed to open TCP connection for SSH) 官方回答：\nOn many Linux systems the default firewall can be configured with iptables. You will have to allow all incoming and outgoing traffic on UDP port 33001 (or whatever your Aspera UDP port is), which you can do with the following commands:\n使用如下命令进行操作：\niptables -I INPUT -p tcp --dport 33001 -j ACCEPT iptables -I OUTPUT -p tcp --dport 33001 -j ACCEPT ","wordCount":"898","inLanguage":"en","image":"https://source.unsplash.com/random/400x200?code","datePublished":"2020-10-09T20:13:35+08:00","dateModified":"2024-02-23T20:13:35+08:00","author":{"@type":"Person","name":"Jeason"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jeason.netlify.app/en/posts/tech/aspera/"},"publisher":{"@type":"Organization","name":"Jeason's Blog","logo":{"@type":"ImageObject","url":"https://jeason.netlify.app/img/avatar.jpeg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jeason.netlify.app/en/ accesskey=h title="Jeason's Blog (Alt + H)"><img src=https://jeason.netlify.app/img/avatar.jpeg alt aria-label=logo height=35>Jeason's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li class=menu-item><a href=https://jeason.netlify.app/en/search title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li><li class=menu-item><a href=https://jeason.netlify.app/en/ title="🏡 主页"><span>🏡 主页</span></a></li><li class=menu-item><a href=https://jeason.netlify.app/en/posts title="📚 文章"><span>📚 文章</span></a></li><li class=menu-item><a href=https://jeason.netlify.app/en/archives title="📈 归档"><span>📈 归档</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://jeason.netlify.app/en/>主页</a>&nbsp;»&nbsp;<a href=https://jeason.netlify.app/en/posts/>📚 文章</a>&nbsp;»&nbsp;<a href=https://jeason.netlify.app/en/posts/tech/>👨🏻‍💻 技术</a></div><h1 class=post-title>Aspera的安装与使用</h1><div class=post-description>Aspera是一款高速下载工具，这里介绍它的安装和基本用法</div><div class=post-meta>创建: 2020-10-09 | 更新: 2024-02-23 | 作者:Jeason
<span id=busuanzi_container_page_pv>&nbsp;|&nbsp;访问:&nbsp;<span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>文章目录</span></summary><div class=inner><ul><li><a href=#%e5%ae%89%e8%a3%85 aria-label=安装>安装</a></li><li><a href=#%e4%b8%8b%e8%bd%bdsra%e6%95%b0%e6%8d%ae aria-label=下载sra数据>下载sra数据</a></li><li><a href=#aspera%e6%89%b9%e9%87%8f%e4%b8%8b%e8%bd%bdsra%e6%96%87%e4%bb%b6 aria-label=Aspera批量下载SRA文件>Aspera批量下载SRA文件</a></li><li><a href=#%e6%8a%a5%e9%94%99 aria-label=报错>报错</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=安装>安装<a hidden class=anchor aria-hidden=true href=#安装>#</a></h2><ol><li><p>根据电脑版本下载对应aspera connect server，下载地址：https://www.ibm.com/products/aspera/downloads</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ./download
</span></span><span style=display:flex><span>wget http://download.asperasoft.com/download/sw/connect/3.7.4/aspera-connect-3.7.4.147727-linux-64.tar.gz
</span></span></code></pre></div></li><li><p>下载获得的是shell脚本，解压安装</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>tar zxf aspera-connect-3.7.4.147727-linux-64.tar.gz
</span></span><span style=display:flex><span>bash aspera-connect-3.7.4.147727-linux-64.sh
</span></span></code></pre></div></li><li><p>安装后找到home目录下的会有一个.aspera目录，里边包含密钥等信息，可以将其添加入环境变量中</p><blockquote><p>在.aspera的目录，有两个文件比较重要: 一个是ascp的可执行文件<code>~/.aspera/connect/bin/ascp</code>，另一个ascp的密钥文件<code>~/.aspera/connect/etc/asperaweb_id_dsa.putty</code>,可以把密钥备份到home目录当中</p></blockquote><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~
</span></span><span style=display:flex><span>echo <span style=color:#48b685>&#39;PATH=$PATH:/home/jeason/.aspera/connect/bin/&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style=display:flex><span>cp ~/.aspera/connect/etc/asperaweb_id_dsa.putty ~/
</span></span><span style=display:flex><span>source .bashrc
</span></span></code></pre></div><p>重新source配置文件生效</p></li><li><p>使用<code>ascp --help</code>参看命令参数</p><p>常见参数：</p><ul><li><code>-v</code> verbose mode 唠叨模式，能让你实时知道程序在干啥，方便查错。</li><li><code>-T</code> 取消加密，否则有时候数据下载不了 。</li><li><code>-i</code> 提供私钥文件的地址，我也不知道干嘛的，反正不能少，地址一般是~/.aspera/connect/etc中的asperaweb_id_dsa.openssh文件</li><li><code>-l</code> 设置最大传输速度，一般200m到500m，如果不设置，反而速度会比较低，可能有个较低的默认值</li><li><code>-k</code> 断点续传，一般设置为值1</li></ul></li></ol><h2 id=下载sra数据>下载sra数据<a hidden class=anchor aria-hidden=true href=#下载sra数据>#</a></h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ascp -T -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh  -k <span style=color:#f99b15>1</span> -l 200m anonftp@ftp-private.ncbi.nlm.nih.gov:/sra/sra-instant/reads/ByRun/sra/SRR/SRR620/SRR6208854/SRR6208854.sra ./
</span></span></code></pre></div><blockquote><p>SRA数据库下载：首先记住，数据的存放地址是<code>ftp-private.ncbi.nlm.nih.gov</code>，SRA在Aspera的用户名是<code>anonftp</code></p></blockquote><h2 id=aspera批量下载sra文件>Aspera批量下载SRA文件<a hidden class=anchor aria-hidden=true href=#aspera批量下载sra文件>#</a></h2><p>很多时候需要同时下载多个SRA文件，ascp命令提供参数<code>--file-list</code>，用于批量下载SRA文件。</p><p>可以将下载列表写入sra.txt文件中，然后进行批量下载</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/sra/sra-instant/reads/ByRun/sra/SRR/SRR623/SRR6232298/SRR6232298.sra
</span></span><span style=display:flex><span>/sra/sra-instant/reads/ByRun/sra/SRR/SRR623/SRR6232299/SRR6232299.sra
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ascp -T -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh  -k <span style=color:#f99b15>1</span> -l 200m --mode recv --host ftp-private.ncbi.nlm.nih.gov --user anonftp --file-list ~/sra.txt ./
</span></span></code></pre></div><blockquote><p>asprea同样可以下载ENA的数据，ENA在Aspera的用户名是<code>era-fasp</code>，数据的存放地址是<code>fasp.sra.ebi.ac.uk</code></p></blockquote><h2 id=报错>报错<a hidden class=anchor aria-hidden=true href=#报错>#</a></h2><p>有时会遇到以下报错：</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ascp: Failed to open TCP connection <span style=color:#815ba4>for</span> SSH, exiting.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Session Stop <span style=color:#5bc4bf>(</span>Error: Failed to open TCP connection <span style=color:#815ba4>for</span> SSH<span style=color:#5bc4bf>)</span>
</span></span></code></pre></div><p>官方回答：</p><blockquote><p>On many Linux systems the default firewall can be configured with iptables. You will have to allow all incoming and outgoing traffic on UDP port 33001 (or whatever your Aspera UDP port is), which you can do with the following commands:</p></blockquote><p>使用如下命令进行操作：</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>iptables -I INPUT -p tcp --dport <span style=color:#f99b15>33001</span> -j ACCEPT
</span></span><span style=display:flex><span>iptables -I OUTPUT -p tcp --dport <span style=color:#f99b15>33001</span> -j ACCEPT
</span></span></code></pre></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://jeason.netlify.app/en/posts/tech/annotationforge/><span class=title>« 上一页</span><br><span>AnnotationForge包构建非模式物种Orgdb包</span>
</a><a class=next href=https://jeason.netlify.app/en/posts/tech/advancer/><span class=title>下一页 »</span><br><span>R语言高级程序设计</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>💬评论</span><hr></div><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.15/twikoo.all.min.js></script><script>twikoo.init({envId:"https://twikoo.lvbibir.cn/",el:"#tcomment",lang:"zh-CN",path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><footer class=footer><a href=https://gohugo.io/ target=_blank><img style=display:unset src=https://image.lvbibir.cn/blog/frame-hugo-blue.svg>
</a><a href=https://github.com/adityatelange/hugo-PaperMod target=_blank><img style=display:unset src=https://image.lvbibir.cn/blog/theme-papermod-lightgrey.svg></a><br><span id=runtime_span></span>
<script type=text/javascript>function show_runtime(){window.setTimeout("show_runtime()",1e3),X=new Date("7/13/2021 1:00:00"),Y=new Date,T=Y.getTime()-X.getTime(),M=24*60*60*1e3,a=T/M,A=Math.floor(a),b=(a-A)*24,B=Math.floor(b),c=(b-B)*60,C=Math.floor((b-B)*60),D=Math.floor((c-C)*60),runtime_span.innerHTML="网站已运行"+A+"天"+B+"小时"}show_runtime()</script>|
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span id=busuanzi_container>总访客数: <span id=busuanzi_value_site_uv></span>
|
总访问量: <span id=busuanzi_value_site_pv></span></span><br><span>Copyright
&copy;
2021-2024
<a href=https://jeason.netlify.app/en/ style="border-bottom:1px solid">Jeason's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="📄复制";function c(){t.innerText="👌🏻已复制!",setTimeout(()=>{t.innerText="📄复制"},2e3)}t.addEventListener("click",t=>{const n=document.createRange();n.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(n);try{document.execCommand("copy"),c()}catch{}s.removeRange(n)});let l=e.className.replaceAll("language-",""),n=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div");o.innerText=l,n.setAttribute("class","mac-tool"),i.setAttribute("class","mac bb1"),a.setAttribute("class","mac bb2"),r.setAttribute("class","mac bb3"),o.setAttribute("class","language-type"),n.appendChild(i),n.appendChild(a),n.appendChild(r),n.appendChild(o),s.classList.contains("highlight")?(s.appendChild(t),s.appendChild(n)):s.parentNode.firstChild===s||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName==="TABLE"?(e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t),s.appendChild(n)):(e.parentNode.appendChild(t),s.appendChild(n)))})</script></body></html>